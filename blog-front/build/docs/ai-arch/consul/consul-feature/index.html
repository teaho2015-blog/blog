<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-ai-arch/consul/consul-feature" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.0">
<title data-rh="true">Consul能力下探和同类型中间件对比 | Tea&#x27;s Blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://blog.teaho.net/docs/ai-arch/consul/consul-feature"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Consul能力下探和同类型中间件对比 | Tea&#x27;s Blog"><meta data-rh="true" name="description" content="简介"><meta data-rh="true" property="og:description" content="简介"><link data-rh="true" rel="icon" href="/img/logo.png"><link data-rh="true" rel="canonical" href="https://blog.teaho.net/docs/ai-arch/consul/consul-feature"><link data-rh="true" rel="alternate" href="https://blog.teaho.net/docs/ai-arch/consul/consul-feature" hreflang="en"><link data-rh="true" rel="alternate" href="https://blog.teaho.net/docs/ai-arch/consul/consul-feature" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0T8ST6E0FN"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-0T8ST6E0FN",{})</script>







<script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?751fad25d8bfffcee48a1a764be9d401";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script>
<link rel="icon" href="/img/logo.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#12affa">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="teaho2015 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="teaho2015 Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="teaho2015 JSON Feed">
<meta name="description" content="headTagsContent">
<link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/misans@4.0.0/lib/Normal/MiSans-Normal.min.css">
<link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/misans@4.0.0/lib/Normal/MiSans-Semibold.min.css"><link rel="stylesheet" href="/assets/css/styles.b54a7859.css">
<script src="/assets/js/runtime~main.e1c09951.js" defer="defer"></script>
<script src="/assets/js/main.eb10a93d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_VIjG" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_DtP3"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Tea&#x27;s Blog" class="themedComponent_TcKe themedComponent--light_eba_"><img src="/img/logo.png" alt="Tea&#x27;s Blog" class="themedComponent_TcKe themedComponent--dark_CFQW"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Tea&#x27;s Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/collections">合集</a><ul class="dropdown__menu"><li><a href="https://spring-source-code-learning.gitbook.teaho.net" target="_blank" rel="noopener noreferrer" class="dropdown__link">Spring、Spring Boot、Spring Cloud剖析<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_eMB3"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://design-pattern-learning.gitbook.teaho.net" target="_blank" rel="noopener noreferrer" class="dropdown__link">Design Pattern分析<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_eMB3"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://java-api-learning.gitbook.teaho.net" target="_blank" rel="noopener noreferrer" class="dropdown__link">Java8基础API分析<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_eMB3"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://offer-prepare.teaho.net" target="_blank" rel="noopener noreferrer" class="dropdown__link">Java开发知识点总结<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_eMB3"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://travel-around-china.gitbook.teaho.net" target="_blank" rel="noopener noreferrer" class="dropdown__link">环游中国多省的一些记录<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_eMB3"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://mysql.gitbook.teaho.net" target="_blank" rel="noopener noreferrer" class="dropdown__link">Mysql query optimization summary<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_eMB3"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://dubbo-learning.gitbook.teaho.net" target="_blank" rel="noopener noreferrer" class="dropdown__link">dubbo一些笔记<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_eMB3"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/ai-arch">算法架构和人工智能</a></li><li><a class="dropdown__link" href="/docs/k8s">容器和Kubernetes</a></li></ul></div><a class="navbar__item navbar__link" href="/archive">归档</a><a class="navbar__item navbar__link" href="/about">关于/联系</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">更多</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/changelog">changelog</a></li></ul></div><div class="navbarSearchContainer__XZP"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_LBCs"><div class="docsWrapper_vEC5"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_prlU" type="button"></button><div class="docRoot_RzEu"><aside class="theme-doc-sidebar-container docSidebarContainer_sv94"><div class="sidebarViewport_H_tS"><div class="sidebar_XFZl sidebarWithHideableNavbar_abAx"><a tabindex="-1" class="sidebarLogo_SwoO" href="/"><img src="/img/logo.png" alt="Tea&#x27;s Blog" class="themedComponent_TcKe themedComponent--light_eba_"><img src="/img/logo.png" alt="Tea&#x27;s Blog" class="themedComponent_TcKe themedComponent--dark_CFQW"><b></b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_y5Wy"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/ai-arch">算法架构与人工智能</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/ai-arch/cpp">c++的基础知识梳理</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/ai-arch/consul/consul-deploy">Consul</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ai-arch/consul/consul-deploy">Consul部署</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/ai-arch/consul/consul-feature">Consul能力下探和同类型中间件对比</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/ai-arch/head-first-gpu">了解GPU</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/ai-arch/dl-base">算法</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ai-arch/llm">LLM</a><button aria-label="Expand sidebar category &#x27;LLM&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_lXDw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_pCJh"><div class="docItemContainer_EWbU"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_IPcN" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_PALx"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Consul</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Consul能力下探和同类型中间件对比</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_Wqfw theme-doc-toc-mobile tocMobile_Zu2a"><button type="button" class="clean-btn tocCollapsibleButton_u9Q8">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Consul能力下探和同类型中间件对比</h1></header><h2 class="anchor anchorWithHideOnScrollNavbar_wgfK" id="简介">简介<a href="#简介" class="hash-link" aria-label="Direct link to 简介" title="Direct link to 简介">​</a></h2>
<blockquote>
<p>基于consul 1.5.1</p>
</blockquote>
<p>上一篇我们部署完Consul。
但是究竟Consul有什么功能，我们能把它因应我们的业务技术架构做一个怎样的迭代， 还是未知数。
这一篇我们对Consul的能力进行罗列，并比对同类型中间件的能力。</p>
<p>单集群架构：
<img loading="lazy" alt="img.png" src="/assets/images/single-cluster-arch-84a84256922ca9e3ff7261b1d39bda62.png" width="1033" height="401" class="img_zKyM"></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_wgfK" id="核心功能">核心功能<a href="#核心功能" class="hash-link" aria-label="Direct link to 核心功能" title="Direct link to 核心功能">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_wgfK" id="文档代码">文档代码<a href="#文档代码" class="hash-link" aria-label="Direct link to 文档代码" title="Direct link to 文档代码">​</a></h3>
<p>Consul的官方文档<a href="https://developer.hashicorp.com/consul/docs" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/consul/docs</a></p>
<p>我写的C++和Java的Demo，基于ppconsul和Spring cloud consul库。<br>
<span style="display:inline-flex;gap:0.25rem"><span></span><a href="https://github.com/teaho-infra/consul-demo" target="_blank" rel="noopener noreferrer">https://github.com/teaho-infra/consul-demo</a></span></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_wgfK" id="注册发现和销毁">注册发现和销毁<a href="#注册发现和销毁" class="hash-link" aria-label="Direct link to 注册发现和销毁" title="Direct link to 注册发现和销毁">​</a></h3>
<p>这是一个注册和销毁的例子。</p>
<div class="language-javascript codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-javascript codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">agent</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token method function property-access" style="color:hsl(207, 82%, 66%)">registerService</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token literal-property property" style="color:hsl(355, 65%, 65%)">ppconsul</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">agent</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">kw</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">name </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> serviceId</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token literal-property property" style="color:hsl(355, 65%, 65%)">ppconsul</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">agent</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">kw</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">address </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;127.0.0.1&quot;</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token literal-property property" style="color:hsl(355, 65%, 65%)">ppconsul</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">agent</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">kw</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">id </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> serviceId</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token literal-property property" style="color:hsl(355, 65%, 65%)">ppconsul</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">agent</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">kw</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">port </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> port</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token literal-property property" style="color:hsl(355, 65%, 65%)">ppconsul</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">agent</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">kw</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">tags </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;cpp-consul-demo&quot;</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;v1&quot;</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token literal-property property" style="color:hsl(355, 65%, 65%)">ppconsul</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">agent</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">kw</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">meta </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;meta1&quot;</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;cpp-consul-demo&quot;</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token literal-property property" style="color:hsl(355, 65%, 65%)">ppconsul</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">agent</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">kw</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">check </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> ppconsul</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">agent</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token maybe-class-name" style="color:hsl(29, 54%, 61%)">TcpCheck</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;127.0.0.1:&quot;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+</span><span class="token plain"> std</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token function" style="color:hsl(207, 82%, 66%)">to_string</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">port</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:hsl(355, 65%, 65%)">std</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">chrono</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token function" style="color:hsl(207, 82%, 66%)">seconds</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token number" style="color:hsl(29, 54%, 61%)">10</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"> </span><span class="token comment" style="color:hsl(220, 10%, 40%)">// 只做模拟操作，用的consul本身的地址</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">agent</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token method function property-access" style="color:hsl(207, 82%, 66%)">deregisterService</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">serviceId</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>consul支持设置service name和id，注册发现时候通过name去找service。同时能够配置一些标签和简单的元数据。<br>
<!-- -->Consul提供多种健康检查（health check）机制。</p>
<ul>
<li>Script check 脚本检查</li>
<li>Http check 向指定地址发送http请求的检查</li>
<li>Tcp check 向指定地址建立tcp连接检查</li>
<li>Ttl check 被动等待client上传状态的检查</li>
<li>……</li>
</ul>
<p>服务发现
Consul client通过services API获取所有服务或者指定服务状态信息（c++的ppconsul不支持指定服务），  完成注册发现。</p>
<div class="language-javascript codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-javascript codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">auto services </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> std</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">make_shared</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">std</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">map</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">std</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">string</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:hsl(355, 65%, 65%)">ppconsul</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token maybe-class-name" style="color:hsl(29, 54%, 61%)">ServiceInfo</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;&gt;</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">agent</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token method function property-access" style="color:hsl(207, 82%, 66%)">services</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token keyword control-flow" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">services</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token literal-property property" style="color:hsl(355, 65%, 65%)">std</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">cout </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;Registered Services:&quot;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;&lt;</span><span class="token plain"> std</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">endl</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token keyword control-flow" style="color:hsl(286, 60%, 67%)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token keyword" style="color:hsl(286, 60%, 67%)">const</span><span class="token plain"> auto</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&amp;</span><span class="token plain"> service </span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain">services</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token literal-property property" style="color:hsl(355, 65%, 65%)">std</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">cout </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;Service ID: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;&lt;</span><span class="token plain"> service</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">second</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;&lt;</span><span class="token plain"> std</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">endl</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token literal-property property" style="color:hsl(355, 65%, 65%)">std</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">cout </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;Service Name: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;&lt;</span><span class="token plain"> service</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">second</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">name</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;&lt;</span><span class="token plain"> std</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">endl</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token literal-property property" style="color:hsl(355, 65%, 65%)">std</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">cout </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;Service Address: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;&lt;</span><span class="token plain"> service</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">second</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">address</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;&lt;</span><span class="token plain"> std</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">endl</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token literal-property property" style="color:hsl(355, 65%, 65%)">std</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">cout </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;Service Port: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;&lt;</span><span class="token plain"> service</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">second</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">port</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;&lt;</span><span class="token plain"> std</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">endl</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token literal-property property" style="color:hsl(355, 65%, 65%)">std</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">cout </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;-------------------------&quot;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;&lt;</span><span class="token plain"> std</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">endl</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:hsl(286, 60%, 67%)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token literal-property property" style="color:hsl(355, 65%, 65%)">std</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">cerr </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;Failed to retrieve services.&quot;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;&lt;</span><span class="token plain"> std</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">endl</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_wgfK" id="配置中心">配置中心<a href="#配置中心" class="hash-link" aria-label="Direct link to 配置中心" title="Direct link to 配置中心">​</a></h3>
<p>Consul支持kv配置。一般可通过该项做到配置中心等能力。比如例子里，从指定路径（apps/kvMain::dev/configuration）获取YAML信息。</p>
<div class="language-javascript codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-javascript codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token literal-property property" style="color:hsl(355, 65%, 65%)">ppconsul</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token maybe-class-name" style="color:hsl(29, 54%, 61%)">Consul</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">consul</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;127.0.0.1:8500&quot;</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token literal-property property" style="color:hsl(355, 65%, 65%)">ppconsul</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">kw</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">dc </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;dc1&quot;</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token comment" style="color:hsl(220, 10%, 40%)">// We need the &#x27;kv&#x27; endpoint</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token literal-property property" style="color:hsl(355, 65%, 65%)">ppconsul</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">kv</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token maybe-class-name" style="color:hsl(29, 54%, 61%)">Kv</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">kv</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">consul</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token comment" style="color:hsl(220, 10%, 40%)">// Read the value of a key from the storage</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token literal-property property" style="color:hsl(355, 65%, 65%)">std</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">string configuration </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> kv</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token method function property-access" style="color:hsl(207, 82%, 66%)">get</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;apps/kvMain::dev/configuration&quot;</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;default-value&quot;</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token comment" style="color:hsl(220, 10%, 40%)">// Erase a key from the storage</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">kv</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token method function property-access" style="color:hsl(207, 82%, 66%)">erase</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;apps/kvMain::dev/configuration2&quot;</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token comment" style="color:hsl(220, 10%, 40%)">// Set the value of a key</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">kv</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token method function property-access" style="color:hsl(207, 82%, 66%)">set</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;apps/kvMain::dev/configuration2&quot;</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;new-value&quot;</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_wgfK" id="session">Session<a href="#session" class="hash-link" aria-label="Direct link to Session" title="Direct link to Session">​</a></h3>
<p>Consul提供了一个叫做 Session的功能，我们可以创建并持有一个session，通过这个session去创建并抢占kv，或者监听kv变化，能够实现如分布式锁、集群选主等功能。
如下是一个分布式锁实现：</p>
<div class="language-javascript codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-javascript codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token literal-property property" style="color:hsl(355, 65%, 65%)">ppconsul</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">sessions</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token maybe-class-name" style="color:hsl(29, 54%, 61%)">Sessions</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">sessions</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">consul</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token literal-property property" style="color:hsl(355, 65%, 65%)">ppconsul</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">kv</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token maybe-class-name" style="color:hsl(29, 54%, 61%)">Kv</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">kv</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">consul</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token comment" style="color:hsl(220, 10%, 40%)">//    kw::groups::put, kw::name, kw::node, kw::lock_delay, kw::behavior, kw::ttl</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    auto sessionId </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> sessions</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token method function property-access" style="color:hsl(207, 82%, 66%)">create</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">name </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> checkId</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> ttl </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> std</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">chrono</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token function" style="color:hsl(207, 82%, 66%)">seconds</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token number" style="color:hsl(29, 54%, 61%)">600</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token literal-property property" style="color:hsl(355, 65%, 65%)">std</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">cout </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;Session created!&quot;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;&lt;</span><span class="token plain"> std</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain">endl</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token comment" style="color:hsl(220, 10%, 40%)">// 获取当前时间</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    time_t now </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">time</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    char</span><span class="token operator" style="color:hsl(207, 82%, 66%)">*</span><span class="token plain"> dt </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">ctime</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&amp;</span><span class="token plain">now</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    kv</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token method function property-access" style="color:hsl(207, 82%, 66%)">lock</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">lockKey</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> sessionId</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> dt</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token function" style="color:hsl(207, 82%, 66%)">getchar</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    sessions</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token method function property-access" style="color:hsl(207, 82%, 66%)">destroy</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">sessionId</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_wgfK" id="acl">Acl<a href="#acl" class="hash-link" aria-label="Direct link to Acl" title="Direct link to Acl">​</a></h3>
<p>acl功能，可以允许我们调用consul server、proxy等增加基于access token、role等去控制节点访问。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_wgfK" id="intention">Intention<a href="#intention" class="hash-link" aria-label="Direct link to Intention" title="Direct link to Intention">​</a></h3>
<p>从文档和代码看出Consul在设计时就面向了ServiceMesh，有一些比较方便的能力（服务间的Intention等）。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_wgfK" id="同类型中间件对比">同类型中间件对比<a href="#同类型中间件对比" class="hash-link" aria-label="Direct link to 同类型中间件对比" title="Direct link to 同类型中间件对比">​</a></h2>
<p>我们列举下主流的注册中心中间件：</p>
<ul>
<li>Consul , github stars: 28k，项目框架中使用</li>
<li>Zookeeper, github stars: 12.3k，我司统一使用</li>
<li>Etcd, github stars: 47k，作为K8s的kv数据库，间接使用频率高</li>
<li>Nacos, github stars: 30k，较少使用</li>
<li>Eureka, github stars: 12k，没有</li>
</ul>
<p>我会选择目前工作中直接接触到：Consul、zookeeper、nacos 作对比。
对比将分为 <strong>三大类</strong>：</p>
<ol>
<li>作为注册中心的关键能力：什么是关键能力？就是基于CAP原则考察一致性、存活检查能力、更新通知即时性、多语言或协议适配性。</li>
<li>丰富的核心功能和适配能力：事务控制、kv能力、多数据中心。</li>
<li>性能和安全性：能够存储多少数据、能够支持多少服务注册、是否支持服务流量安全传输和鉴权模型。</li>
</ol>
<table><thead><tr><th>​能力</th><th>Consul</th><th>Zookeeper</th><th>Nacos</th><th>备注</th></tr></thead><tbody><tr><td>CAP和一致性协议</td><td>CP（raft协议）</td><td>CP（Paxos协议）</td><td>AP（Distro协议）+ CP(raft协议 用的JRaft实现)</td><td></td></tr><tr><td>存活检测</td><td>支持自定义脚本、ttl、http、tcp端口检测</td><td>Client tcp定期发送心跳包</td><td>sdk集成，http定时心跳接口</td><td></td></tr><tr><td>更新通知即时性</td><td>通过阻塞查询</td><td>一次性watch机制，轻便设计</td><td>数据发生更改，udp通知服务节点更新情况</td><td></td></tr><tr><td>通信协议</td><td>http/dns</td><td>tcp</td><td>Http api</td><td>三者常见语言都有sdk</td></tr><tr><td>kv数据</td><td>支持</td><td>支持</td><td>支持</td><td>说明都具备一定的配置能力</td></tr><tr><td>事务控制</td><td>kv+session机制，可以对某一kv键启动session并加锁</td><td>通过临时节点+watch机制，对某一path加锁</td><td>-</td><td>nacos可参考去年glcc自实现<span style="display:inline-flex;gap:0.25rem"><span></span><a href="https://github.com/alibaba/nacos/issues/10378" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/nacos/issues/10378</a></span></td></tr><tr><td>多数据中心管理</td><td>支持</td><td>支持，我司自实现</td><td>支持</td><td></td></tr><tr><td>数据存储性能</td><td>GB级数据存储</td><td>GB级数据存储</td><td>GB级数据存储</td><td>数据取自网络，三者皆为分布式中间件，能随扩容承担更多流量。不同业务和服务属性所存储的数据量和使用功能不一而足，这两块性能最终根据服务属性优化为佳。</td></tr><tr><td>请求处理性能</td><td>3节点万级tps</td><td>3节点万级tps</td><td>3节点万级tps</td><td>同上</td></tr><tr><td>鉴权</td><td>Acl</td><td>Acl</td><td>RBAC</td><td></td></tr></tbody></table>
<h2 class="anchor anchorWithHideOnScrollNavbar_wgfK" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h2>
<p>[1]<a href="https://cloud.spring.io/spring-cloud-consul/reference/html/#spring-cloud-consul-install" target="_blank" rel="noopener noreferrer">Spring Cloud Consul文档|spring.io</a><br>
<!-- -->[2]<a href="https://spring-source-code-learning.gitbook.teaho.net/cloud/nacos" target="_blank" rel="noopener noreferrer">Nacos分析 · Spring Learning|teaho.net</a><br>
<!-- -->[3]<a href="https://zookeeper.apache.org/doc/current/zookeeperOver.html" target="_blank" rel="noopener noreferrer">ZooKeeper doc</a><br>
<!-- -->[4]<a href="https://nacos.io/zh-cn/docs/nacos-config-benchmark.html" target="_blank" rel="noopener noreferrer">https://nacos.io/zh-cn/docs/nacos-config-benchmark.html</a><br>
<!-- -->[5]<a href="https://cloud.tencent.com/developer/article/1491107" target="_blank" rel="noopener noreferrer">https://cloud.tencent.com/developer/article/1491107</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_Ddca"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-04-06T10:05:48.000Z">Apr 6, 2025</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/ai-arch/consul/consul-deploy"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Consul部署</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/ai-arch/head-first-gpu"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">了解GPU</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_jeP5 thin-scrollbar theme-doc-toc-desktop" style="opacity:0;transform:translateX(100px) translateZ(0)"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#简介" class="table-of-contents__link toc-highlight">简介</a></li><li><a href="#核心功能" class="table-of-contents__link toc-highlight">核心功能</a><ul><li><a href="#文档代码" class="table-of-contents__link toc-highlight">文档代码</a></li><li><a href="#注册发现和销毁" class="table-of-contents__link toc-highlight">注册发现和销毁</a></li><li><a href="#配置中心" class="table-of-contents__link toc-highlight">配置中心</a></li><li><a href="#session" class="table-of-contents__link toc-highlight">Session</a></li><li><a href="#acl" class="table-of-contents__link toc-highlight">Acl</a></li><li><a href="#intention" class="table-of-contents__link toc-highlight">Intention</a></li></ul></li><li><a href="#同类型中间件对比" class="table-of-contents__link toc-highlight">同类型中间 件对比</a></li><li><a href="#reference" class="table-of-contents__link toc-highlight">Reference</a></li></ul><hr class="hr_UhE0"><span class="percent_H6RK">0%<!-- --> </span></div></div></div><div>Loading Comments...</div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">站内</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/archive">Archive</a></li><li class="footer__item"><a class="footer__link-item" href="/collections">合集</a></li></ul></div><div class="col footer__col"><div class="footer__title">联系</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" position="right" href="/about">关于我</a></li><li class="footer__item"><a href="https://github.com/teaho2015" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_eMB3"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item">
                  <a href="mailto:teaho2015@gmail.com" title="gmail" target="_blank" rel="noreferrer noopener" aria-label="gmail">
                    <img src="https://cdn.simpleicons.org/Gmail#EA4335" alt="Deploys by Netlify" width="25" height="25">
                  </a>
                </li><li class="footer__item">
                  <div style="top:50%;">
                  <img src="https://cdn.simpleicons.org/wechat##07C160" alt="wechat:hotingleong" width="15" height="15"> hotingleong

                  </div>
                </li></ul></div><div class="col footer__col"><div class="footer__title">条款</div><ul class="footer__items clean-list"><li class="footer__item">
                  <a href="https://www.netlify.com" target="_blank" rel="noreferrer noopener" aria-label="Deploys by Netlify">
                    <img src="https://www.netlify.com/img/global/badges/netlify-color-accent.svg" alt="Deploys by Netlify" width="114" height="51">
                  </a>
                </li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
        <p>Copyright © Tea's Blog 2016-2025.All rights reserved. My works are licensed under CC BY-NC-SA 4.0 .</p>
        </div></div></div></footer></div>
</body>
</html>