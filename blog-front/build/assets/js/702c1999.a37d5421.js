"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[303],{13207:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>t,contentTitle:()=>r,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>d});var o=l(13274),c=l(1780);const s={id:"consul-deploy",slug:"/ai-arch/consul/consul-deploy",title:"Consul\u90e8\u7f72"},r=void 0,i={id:"ai-arch/consul/consul-deploy",title:"Consul\u90e8\u7f72",description:"\u5355\u8282\u70b9\u90e8\u7f72\u8fd0\u884c",source:"@site/docs/ai-arch/consul/consul-deploy.md",sourceDirName:"ai-arch/consul",slug:"/ai-arch/consul/consul-deploy",permalink:"/docs/ai-arch/consul/consul-deploy",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1743933948,formattedLastUpdatedAt:"Apr 6, 2025",frontMatter:{id:"consul-deploy",slug:"/ai-arch/consul/consul-deploy",title:"Consul\u90e8\u7f72"},sidebar:"ai-arch",previous:{title:"c++\u7684\u57fa\u7840\u77e5\u8bc6\u68b3\u7406",permalink:"/docs/ai-arch/cpp"},next:{title:"Consul\u80fd\u529b\u4e0b\u63a2\u548c\u540c\u7c7b\u578b\u4e2d\u95f4\u4ef6\u5bf9\u6bd4",permalink:"/docs/ai-arch/consul/consul-feature"}},t={},d=[{value:"\u5355\u8282\u70b9\u90e8\u7f72\u8fd0\u884c",id:"\u5355\u8282\u70b9\u90e8\u7f72\u8fd0\u884c",level:2},{value:"\u6e90\u7801\u5b89\u88c5",id:"\u6e90\u7801\u5b89\u88c5",level:3},{value:"\u5feb\u6377\u542f\u52a8",id:"\u5feb\u6377\u542f\u52a8",level:3},{value:"docker\u90e8\u7f72",id:"docker\u90e8\u7f72",level:2},{value:"Ppconsul \u5b89\u88c5",id:"ppconsul-\u5b89\u88c5",level:2},{value:"Reference",id:"reference",level:2}];function a(e){const n={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"\u5355\u8282\u70b9\u90e8\u7f72\u8fd0\u884c",children:"\u5355\u8282\u70b9\u90e8\u7f72\u8fd0\u884c"}),"\n",(0,o.jsx)(n.h3,{id:"\u6e90\u7801\u5b89\u88c5",children:"\u6e90\u7801\u5b89\u88c5"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"https://developer.hashicorp.com/consul/docs/install#compiling-from-source",children:"https://developer.hashicorp.com/consul/docs/install#compiling-from-source"})}),"\n",(0,o.jsx)(n.p,{children:"\u9996\u5148\u6267\u884c\uff0c\u6253\u5305\u53ef\u6267\u884c\u6587\u4ef6\u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"export GOOS=linux GOARCH=amd64\nmake dev\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u4e24\u79cd\u65b9\u5f0f\u542f\u52a8consul server"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"\u5feb\u6377\u542f\u52a8\u7684\u65b9\u5f0f"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"./bin/consul agent -dev\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsx)(n.li,{children:"\u6307\u5b9a\u53c2\u6570\u542f\u52a8\u670d\u52a1"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"./bin/consul agent -disable-host-node-id=true -bind=0.0.0.0 -client=0.0.0.0 -retry-join=${SERVER_NODE_LIST_FROM_DOMAIN[0]} -retry-join=${SERVER_NODE_LIST_FROM_DOMAIN[1]} -retry-join=${SERVER_NODE_LIST_FROM_DOMAIN[2]} -node=${HOST_NAME} -data-dir=/home/work/data/consul_${CLUSTER_NAME}_${DATA_CENTER_NAME}.d -datacenter=${DATA_CENTER_NAME} > /home/work/log/feeds-consul/consul.stdout.log  2>/home/work/log/feeds-consul/consul.stderr.log\n"})}),"\n",(0,o.jsxs)(n.p,{children:["-data-dir\uff1a\u6570\u636e\u76ee\u5f55",(0,o.jsx)(n.br,{}),"\n","-datacenter\uff1a\u6570\u636e\u4e2d\u5fc3\u7684\u540d\u79f0",(0,o.jsx)(n.br,{}),"\n","-bind\uff1a\u7ed1\u5b9aip"]}),"\n",(0,o.jsx)(n.h3,{id:"\u5feb\u6377\u542f\u52a8",children:"\u5feb\u6377\u542f\u52a8"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"./bin/consul agent -dev"})}),"\n",(0,o.jsx)(n.h2,{id:"docker\u90e8\u7f72",children:"docker\u90e8\u7f72"}),"\n",(0,o.jsx)(n.h2,{id:"ppconsul-\u5b89\u88c5",children:"Ppconsul \u5b89\u88c5"}),"\n",(0,o.jsxs)(n.p,{children:["github\u5e93\uff1a",(0,o.jsx)(n.a,{href:"https://github.com/oliora/ppconsul?tab=readme-ov-file",children:"https://github.com/oliora/ppconsul?tab=readme-ov-file"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"cd ppconsul\nmkdir build && cd build\ncmake ..\nmake\nsudo make install\n"})}),"\n",(0,o.jsx)(n.h2,{id:"reference",children:"Reference"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"https://blog.csdn.net/weixin_50448879/article/details/136731875",children:"https://blog.csdn.net/weixin_50448879/article/details/136731875"}),"\n",(0,o.jsx)(n.a,{href:"https://juejin.cn/post/7027839175793573918",children:"https://juejin.cn/post/7027839175793573918"})]})]})}function u(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},1780:(e,n,l)=>{l.d(n,{R:()=>r,x:()=>i});var o=l(79474);const c={},s=o.createContext(c);function r(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:r(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);